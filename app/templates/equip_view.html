{% extends 'menu.html' %}
{% block content %}

<h2>Current Equipment List          
{% if user.is_admin == True %}
    <a class="btn btn-primary" href="{{ url_for('add_equip') }}"> 
    Add Equipment
    </a> 
{% else %}
    <a class="btn btn-primary" href="{{ url_for('add_loan') }}"> 
    Add a loan
    </a> 
{% endif %}

</h2><br><br>

<!-- create a table view of all equipment -->
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Equip Name</th>
            <th>Location</th>
            <th>Price ($)</th>
            <th>Equipment Details</th>
            <th>Image</th>
            
          
        </tr>
    </thead>
    <!--queries all items in the db to display in the table -->
    <tbody>    
        {% for item in equipment %}
        <tr>    
            <td>{{ item.equip_name }}</td>
            <td>{{ item.location.location_name }}</td>
            <td>{{ item.purchase_price }}</td>
            <td>{{ item.equip_details }}</td>

            <td><img width='50px' src = "/static/images/{{ item.file }}"></td>
                {% if user.is_admin == True %}
                <!-- add "edit" button to next to each item -->
                    <td><a class="btn btn-primary" href="{{ url_for('edit_equipment', id = item.equip_id) }}">
                        Edit
                    </a>
                        

                 <!-- add "delete" button to next to each item -->
                <a class="btn btn-danger" href="{{ url_for('delete_equipment', id = item.equip_id) }}">
                    Delete
                </a>

                {% else %}
                {% endif %}
             </td>
        </tr>

        
        
        {% endfor %}
        
        
    </tbody>
</table>
<h2>{{ title }}</h2>
        <!-- The HTML element where the Plotly chart will be displayed -->
        
        <div class="chart" id="chart" ></div>
        
        <!-- Include the Plotly JavaScript, to create the chart -->
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        
        <!-- Get the JSON data for the Plot from the route and render it with Plotly -->
        <script type="text/javascript">
            var graphs = {{ chart_JSON | safe }};
            Plotly.plot('chart', graphs,{});        
        </script>
        <br><br>
</body>


{% endblock %}
